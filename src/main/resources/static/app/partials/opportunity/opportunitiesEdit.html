<div class="opportunitiesEdit view">
    <div class="row">
        <header>
            <h3>Customer Opportunities Maintenance</h3>
        </header>
        <div class="span12">
            <div class="indent">
                <h4>For {{ customer.companyName }}</h4>
                {{customer.addressLine1}}
                <br/>
                {{customer.city + ' '+ customer.state}}
                <br/><br/>
            </div>
        </div>
        <br/><br/>

        <div class="span12">
            <div class="span6">

                <form name="customerOpportunitiesForm" ng-submit="submitForm()">
                    <button type="submit" class="btn btn-primary" ng-disabled="customerOpportunitiesForm.$invalid">
                        Submit
                    </button>


                    <div class="form-group"
                         ng-class="{ 'has-error' : customerOpportunitiesForm.salesPerson.$invalid && !customerOpportunitiesForm.salesPerson.$pristine }">
                        <label>Sales Person</label>
                        <select required ng-model="master.salesPersonId" class="form-control" name="salesPerson"
                                ng-options="s.salesPersonId as s.salesPersonDescription for s in salesPerson_array"></select>
                        <!--<select required ng-model="master._links['crm:sales'].href" class="form-control" name="salesPerson"-->
                        <!--ng-options="s._links.self.href as s.salesPersonDescription for s in salesPerson_array"></select>-->


                        <p ng-show="customerOpportunitiesForm.salesPerson.$invalid && !customerOpportunitiesForm.salesPerson.$pristine"
                           class="help-block">Sales Person is required.</p>
                    </div>


                    <div class="form-group"
                         ng-class="{ 'has-error' : customerOpportunitiesForm.contact.$invalid && !customerOpportunitiesForm.contact.$pristine }">
                        <label>Contact</label>
                        <select required ng-model="master.contactId" class="form-control" name="contact"
                                ng-options="c.contactId as c.contactDescription for c in contact_array"></select>

                        <p ng-show="customerOpportunitiesForm.contact.$invalid && !customerOpportunitiesForm.contact.$pristine"
                           class="help-block">Customer Contact is required.</p>
                    </div>


                    <dynamic-form class="vertical" template="opportunityFormTemplate"
                                  ng-model="opportunityFormObject">
                    </dynamic-form>


                    <h3>Statistics</h3>

                    <div class="form-group"
                         ng-class="{ 'has-error' : customerOpportunitiesForm.probability.$invalid && !customerOpportunitiesForm.probability.$pristine }">
                        <label>Probability</label>
                        <select required ng-model="master.probabilityId" class="form-control" name="probability"
                                ng-options="p.probabilityId as p.name for p in probability_array"></select>

                        <p ng-show="customerOpportunitiesForm.probability.$invalid && !customerOpportunitiesForm.probability.$pristine"
                           class="help-block">Probability is required.</p>
                    </div>
                    <div class="form-group">
                        <label>Potential Revenue</label>
                        <input type="text" name="potentialRevenue" class="form-control"
                               ng-model="master.potentialRevenue">
                    </div>
                    <div class="form-group">
                        <label>Calculation Sales with Probability</label>
                        <input type="text" name="potentialRevenueCalc" readonly class="form-control"
                               ng-model="master.potentialRevenueCalc">
                    </div>


                    <div class="form-group">
                        <label>Discussion</label>
                        <textarea  name="discussion" class="form-control"
                               ng-model="master.discussion"></textarea>
                    </div>

                    <div ng-include src='"app/partials/opportunity/opportunityActionGrid.html"'></div>
                    <button type="submit" class="btn btn-primary" ng-disabled="customerOpportunitiesForm.$invalid">
                        Submit
                    </button>

                </form>
            </div>

        </div>
    </div>
</div>